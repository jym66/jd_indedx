let skuList = [
    {
        "skuId": 314,
        "price": 1.01,
        "stocks": 80,
        "skuName": "换修无忧版 深空灰色 64GB ",
        "pic": "https://img.mall4j.com/2019/04/2cd9ec641d92458983c00d87ff33ad57.jpg",
        "properties": "版本:换修无忧版;颜色:深空灰色;内存:64GB"
    },
    {
        "skuId": 315,
        "price": 1.02,
        "stocks": 0,
        "skuName": "原厂延保版 深空灰色 64GB ",
        "pic": "https://img.mall4j.com/2019/04/bf4c40f7e6e5454e806c244ca49d3964.jpg",
        "properties": "版本:原厂延保版;颜色:深空灰色;内存:64GB"
    },
    {
        "skuId": 316,
        "price": 7102,
        "stocks": 1,
        "skuName": "公开版 银色 64GB ",
        "pic": null,
        "properties": "版本:公开版;颜色:银色;内存:64GB"
    },
    {
        "skuId": 317,
        "price": 7103,
        "stocks": 1,
        "skuName": "换修无忧版 银色 64GB ",
        "pic": null,
        "properties": "版本:换修无忧版;颜色:银色;内存:64GB"
    },
    {
        "skuId": 318,
        "price": 7104,
        "stocks": 1,
        "skuName": "原厂延保版 银色 64GB ",
        "pic": null,
        "properties": "版本:原厂延保版;颜色:银色;内存:64GB"
    },
    {
        "skuId": 319,
        "price": 7600,
        "stocks": 1,
        "skuName": "公开版 金色 256GB ",
        "pic": "https://img.mall4j.com/2019/04/1cfc26bed5084caaa439ed4e49b41885.jpg",
        "properties": "版本:公开版;颜色:金色;内存:256GB"
    },
    {
        "skuId": 320,
        "price": 7601,
        "stocks": 0,
        "skuName": "换修无忧版 金色 256GB ",
        "pic": "https://img.mall4j.com/2019/04/a25a877f99684e1882eef5a5bb9081c4.jpg",
        "properties": "版本:换修无忧版;颜色:金色;内存:256GB"
    },
    {
        "skuId": 321,
        "price": 7602,
        "stocks": 0,
        "skuName": "原厂延保版 金色 256GB ",
        "pic": "https://img.mall4j.com/2019/04/b119c50832d44622a07c7ed0ff10f647.jpg",
        "properties": "版本:原厂延保版;颜色:金色;内存:256GB"
    },
    {
        "skuId": 322,
        "price": 7603,
        "stocks": 0,
        "skuName": "公开版 深空灰色 256GB ",
        "pic": "https://img.mall4j.com/2019/04/98b8c67212994d9bb62ac35aedd1cc08.jpg",
        "properties": "版本:公开版;颜色:深空灰色;内存:256GB"
    },
    {
        "skuId": 323,
        "price": 7604,
        "stocks": 0,
        "skuName": "换修无忧版 深空灰色 256GB ",
        "pic": "https://img.mall4j.com/2019/04/e5cdcd2c310d4cf2b702523db1993dbd.jpg",
        "properties": "版本:换修无忧版;颜色:深空灰色;内存:256GB"
    },
    {
        "skuId": 324,
        "price": 7605,
        "stocks": 0,
        "skuName": "原厂延保版 深空灰色 256GB ",
        "pic": "https://img.mall4j.com/2019/04/9edd1e5a57d345678dd52308496457bb.jpg",
        "properties": "版本:原厂延保版;颜色:深空灰色;内存:256GB"
    },
    {
        "skuId": 325,
        "price": 7606,
        "stocks": 0,
        "skuName": "公开版 银色 256GB ",
        "pic": null,
        "properties": "版本:公开版;颜色:银色;内存:256GB"
    },
    {
        "skuId": 326,
        "price": 7607,
        "stocks": 0,
        "skuName": "换修无忧版 银色 256GB ",
        "pic": null,
        "properties": "版本:换修无忧版;颜色:银色;内存:256GB"
    },
    {
        "skuId": 327,
        "price": 7608,
        "stocks": 0,
        "skuName": "原厂延保版 银色 256GB ",
        "pic": null,
        "properties": "版本:原厂延保版;颜色:银色;内存:256GB"
    },
    {
        "skuId": 328,
        "price": 8000,
        "stocks": 0,
        "skuName": "公开版 金色 512GB ",
        "pic": "https://img.mall4j.com/2019/04/20824781b8f24771b12cf273450aaaae.jpg",
        "properties": "版本:公开版;颜色:金色;内存:512GB"
    },
    {
        "skuId": 329,
        "price": 8001,
        "stocks": 0,
        "skuName": "换修无忧版 金色 512GB ",
        "pic": "https://img.mall4j.com/2019/04/2c60b3e379e84d6bacfd7f04edc1a653.jpg",
        "properties": "版本:换修无忧版;颜色:金色;内存:512GB"
    },
    {
        "skuId": 330,
        "price": 8002,
        "stocks": 0,
        "skuName": "原厂延保版 金色 512GB ",
        "pic": "https://img.mall4j.com/2019/04/2e5239d4fd6e49e29c9f8e75edad7318.jpg",
        "properties": "版本:原厂延保版;颜色:金色;内存:512GB"
    },
    {
        "skuId": 331,
        "price": 8003,
        "stocks": 0,
        "skuName": "公开版 深空灰色 512GB ",
        "pic": "https://img.mall4j.com/2019/04/525b9161f2424645bab7ca1b73e918d2.jpg",
        "properties": "版本:公开版;颜色:深空灰色;内存:512GB"
    },
    {
        "skuId": 332,
        "price": 8004,
        "stocks": 0,
        "skuName": "换修无忧版 深空灰色 512GB ",
        "pic": "https://img.mall4j.com/2019/04/a5dd840eadaa41afadfd7d16ed05b139.jpg",
        "properties": "版本:换修无忧版;颜色:深空灰色;内存:512GB"
    },
    {
        "skuId": 333,
        "price": 8006,
        "stocks": 0,
        "skuName": "原厂延保版 深空灰色 512GB ",
        "pic": "https://img.mall4j.com/2019/04/ae2c5c3b77e0437c93114cae3bfb20e0.jpg",
        "properties": "版本:原厂延保版;颜色:深空灰色;内存:512GB"
    },
    {
        "skuId": 335,
        "price": 8005,
        "stocks": 0,
        "skuName": "换修无忧版 银色 512GB ",
        "pic": null,
        "properties": "版本:换修无忧版;颜色:银色;内存:512GB"
    }
]


// let detail = skuList.s
let properties = []
let skuGroup = {}
// let skuList = detail.skuList
//可选组合
let newSkuList = []
let click = '深空灰色'
// skuList.forEach((value, index) => {
//     newSkuList.push(value.skuName.trim().split(' '))
//     //最后一个元素放库存 用来后边判断
//     newSkuList[index].push(value.stocks)
//     let propList = value.properties.split(';')  // ["版本:公开版","颜色:金色","内存:64GB"]
//     propList.forEach((index) => {
//             let propVal = index.split(':')
//             //用来判断存不存在key对应的值
//             let props = skuGroup[propVal[0]];
//             // propVal[1].'isActive' = false
//             let attributes = {}
//             attributes[propVal[1]] = {isActive: false, isDisabled: false}
//             propVal[1] = attributes
//             //如果没有就新建一个
//             if (props === undefined) {
//                 props = []
//                 props.push(propVal[1]) // 放值进去
//             } else {
//                 // console.log('--------------------------------------------');
//                 // console.log('props', props);
//                 // console.log(Object.keys(propVal[1])[0]);
//
//                 //如果数组里面没有"公开版" 去重
//                 // if (!Object.keys(props[0]).includes(Object.keys(propVal[1])[0])) {
//                 //     console.log(propVal[1], '加入');
//                 //     console.log('--------------------------------------------');
//                 //     props.push(propVal[1]); //把 "公开版" 放进数组
//                 // }
//                 //对象的判断不能用includes 需要自己写方法判断是否有这个key
//                 if (!props.some((item) => Object.keys(item).includes(Object.keys(propVal[1])[0]))) {
//                     props.push(propVal[1]);
//                 }
//             }
//             //最后用propVal[0]为key props为值 转换成一个对象
//             skuGroup[propVal[0]] = props
//         }
//     )
//
// })
// // console.log(skuGroup);
// console.log(newSkuList);
// console.log('----------------------')
//
// //模拟点击
//
// newSkuList.forEach(newSku => {
//     //不包括当前选中值的sku全部置灰色
//     if ((newSku.indexOf(click) > -1 && newSku[newSku.length - 1] === 0)) {
//         console.log(newSku)
//         Object.keys(skuGroup).forEach(skuGroupKey => {
//             skuGroup[skuGroupKey].forEach(value => {
//                 newSku.forEach(sku => {
//                     if (value[sku] !== undefined) {
//                         value[sku]['isDisabled'] = true
//                     }
//                 })
//             })
//         })
//     }
// })
//
// Object.keys(skuGroup).forEach(value => console.log(skuGroup[value]))
//
//
// // let aa = [{'64GB': {isActive: false, isDisabled: false}}]
// // let bb = {'64GB': {isActive: false, isDisabled: false}}
// // console.log(aa.some((item) => {
// //     console.log(Object.keys(item).includes(Object.keys(bb)[0]),);
// //     console.log(Object.keys(item));
// //     console.log(Object.keys(bb)[0]);
// // }))
//
//
//后端切记按序存储发给前端 要不然数据对不上了
let propsList = skuList[0].properties.split(';')
// console.log(propsList);
propsList.forEach((value) => {
    properties.push({
        name: value.split(':')[0],
        attributes: []
    })
})
skuList.forEach(value => {
    if (value.stocks > 0) {
        newSkuList.push({
            attributes: value.skuName.trim().split(' ')
        })
    }
    let prop = value.properties.split(';')
    prop.forEach(value => {
        let key = value.split(':')
        properties.forEach(value => {
            if (value.name === key[0] && !value.attributes.some(item => item.value === key[1])) {
                value.attributes.push({
                    value: key[1],
                    isActive: false,
                    isDisabled: false
                })
            }
        })
    })
})


let matrix = [] // 邻接矩阵存储无向图
let vertexList = []// 顶点数组
let selected = [] // 当前已选的 attribute 列表

const initEmptyAdjMatrix = () => {
    properties.forEach((prop) => {
        prop.attributes.forEach((attr) => {
            vertexList.push(attr.value);
        });
    });
    for (let i = 0; i < vertexList.length; i++) {
        matrix[i] = new Array(vertexList.length).fill(0);
    }
}
newSkuList.forEach(value => {
    console.log(value);
})


